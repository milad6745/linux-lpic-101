LVM ุง Logical Volume Manager 

ฺฉ ุณุณุชู ูุฏุฑุช ูุถุง ุฏุณฺฉ ุฏุฑ ูููฺฉุณ ุงุณุช ฺฉู ุงูฺฉุงู ุงุฌุงุฏ ู ูุฏุฑุช ุญุฌูโูุง ููุทู (logical volumes) ุฑุง ุจุฑ ุฑู ฺฉ ุง ฺูุฏ ุฏุณฺฉ ูุฒฺฉ ูุฑุงูู ูโฺฉูุฏ. ุงู ุงุจุฒุงุฑ ุจู ฺฉุงุฑุจุฑ ุงู ุงูฺฉุงู ุฑุง ูโุฏูุฏ ุชุง ูุถุง ุฐุฎุฑูโุณุงุฒ ุฑุง ุจู ุตูุฑุช ุงูุนุทุงูโูพุฐุฑโุชุฑ ูุฏุฑุช ฺฉูุฏุ ุงุฒ ุฌููู ุชุบุฑ ุงูุฏุงุฒู ุญุฌูโูุงุ ุงูุฒูุฏู ู ุญุฐู ุญุฌูโูุง ุจุฏูู ูุงุฒ ุจู ุฎุงููุด ฺฉุฑุฏู ุณุณุชู.

ุจุฑุฎ ุงุตุทูุงุญุงุช ูุฑุชุจุท ุจุง LVM:

1. **ูพุดโูุฑุถ LVM:**
   - **Physical Volume (PV):** ฺฉ ุฏุณฺฉ ูุฒฺฉ ุง ฺฉ ุจุฎุด ุงุฒ ฺฉ ุฏุณฺฉ ฺฉู ุจู ุนููุงู ูุงุญุฏ ุงุตู ุจุฑุง LVM ุนูู ูโฺฉูุฏ.
   - **Volume Group (VG):** ฺฉ ฺฏุฑูู ุงุฒ ุฏุณฺฉโูุง ุง ุจุฎุดโูุง ฺฉู ุจู ุตูุฑุช ฺฉ ูุงุญุฏ ุชูุณุท LVM ูุฏุฑุช ูโุดูุฏ.
   - **Logical Volume (LV):** ฺฉ ุญุฌู ููุทู ุฏุงุฎู ฺฉ Volume Group ฺฉู ุจุฑ ุฑู ุขู ูุงููุฏ ฺฉ ูพุงุฑุชุดู ุงุณุชูุงุฏู ูโุดูุฏ.

2. **ูุซุงู ุงุฌุฑุง:**
   ูุฑุถ ฺฉูุฏ ฺฉ ุฏุณฺฉ ุจู ูุงู `/dev/sdb` ุฏุงุฑู ู ูโุฎูุงูู ุงุฒ ุทุฑู LVM ุงุฒ ูุถุง ุขู ุงุณุชูุงุฏู ฺฉูู. ูุฑุงุญู ุฒุฑ ูุดุงู ูโุฏููุฏ ฺฺฏููู ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏุงุฏ:

   - **ูุฑุญูู 1: ุงุฌุงุฏ Physical Volume (PV):**
     ```bash
     pvcreate /dev/sdb
     ```
     ุงู ุฏุณุชูุฑ ฺฉ Physical Volume ุจุง ูุงู `/dev/sdb` ุงุฌุงุฏ ูโฺฉูุฏ.

   - **ูุฑุญูู 2: ุงุฌุงุฏ Volume Group (VG):**
     ```bash
     vgcreate myvg /dev/sdb
     ```
     ุงู ุฏุณุชูุฑ ฺฉ Volume Group ุจุง ูุงู `myvg` ุงุฌุงุฏ ูโฺฉูุฏ ู ุจู ุขู `/dev/sdb` ุฑุง ุงุถุงูู ูโฺฉูุฏ.

   - **ูุฑุญูู 3: ุงุฌุงุฏ Logical Volume (LV):**
     ```bash
     lvcreate -L 10G -n mylv myvg
     ```
     ุงู ุฏุณุชูุฑ ฺฉ Logical Volume ุจุง ูุงู `mylv` ู ุงูุฏุงุฒู 10 ฺฏฺฏุงุจุงุช ุฏุฑ Volume Group `myvg` ุงุฌุงุฏ ูโฺฉูุฏ.

   - **ูุฑุญูู 4: ูุฑูุช ู Mount ฺฉุฑุฏู Logical Volume:**
     ```bash
     mkfs.ext4 /dev/myvg/mylv
     mount /dev/myvg/mylv /mnt/mylv
     ```
     ุงู ุฏุณุชูุฑุงุช Logical Volume ุฑุง ูุฑูุช ฺฉุฑุฏู ู ุณูพุณ ุฏุฑ ูุณุฑ `/mnt/mylv` ูุงูุช ูโฺฉููุฏ.

ุญุงูุง ูโุชูุงูุฏ ุจู ุฑุงุญุช ุงุฒ Logical Volume ุงุฌุงุฏ ุดุฏู ุจู ุนููุงู ฺฉ ูพุงุฑุชุดู ุฏุฑ ุณุณุชู ุฎูุฏ ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ูุซุงู ุชุงฺฉุฏ ูโฺฉูุฏ ฺฉู LVM ุจู ุดูุง ุงู ุงูฺฉุงู ุฑุง ูโุฏูุฏ ฺฉู ุจู ุฑุงุญุช ุญุฌูโูุง ุฑุง ูุฏุฑุช ู ุชุบุฑ ุงูุฏุงุฒู ุฏูุฏ ุจุฏูู ุงุฌุงุฏ ุงุฎุชูุงู ุฏุฑ ุนููฺฉุฑุฏ ุณุณุชู.








ุฏุฑ ูููฺฉุณุ **LVM** (Logical Volume Manager) ุณุณุชู ุจุฑุง ูุฏุฑุช ูพูุง ู ููุนุทูู ูุถุง ุฐุฎุฑูโุณุงุฒ ุงุณุช. ุจุง LVM ูโุชูุงูุฏ ุฏุณฺฉโูุง (ุง ูพุงุฑุชุดูโูุง) ุฑุง ุฏุฑ ฺฉ ุง ฺูุฏ **Physical Volume** (PV) ฺฏุฑุฏ ูู ุขูุฑุฏุ ุงุฒ ุขููุง ฺฉ **Volume Group** (VG) ุจุณุงุฒุฏ ู ุณูพุณ ุฏุงุฎู ุขูุ **Logical Volume**โูุง (LV) ุชุนุฑู ู ูุฑ ุฒูุงู ฺฉู ูุงุฒ ุจูุฏ ุจูโุฑุงุญุช ุงูุฏุงุฒูโุดุงู ุฑุง ุจุฒุฑฺฏ ุง ฺฉูฺฺฉ ฺฉูุฏ.

---

## ุณุงุฎุชุงุฑ ู ุงุฌุฒุงุก LVM

1. **Physical Volume (PV)**  
   ูุฑ ูพุงุฑุชุดู ุง ุฏุณฺฉ ูุฒฺฉ ฺฉู ุจุง `pvcreate` ุจุฑุง LVM ุขูุงุฏู ูโุดูุฏ.
2. **Volume Group (VG)**  
   ูุฌููุนูโุง ุงุฒ ฺฉ ุง ฺูุฏ PV ฺฉู ุจุง `vgcreate` ุณุงุฎุชู ูโุดูุฏ.
3. **Logical Volume (LV)**  
   ุจุฎุดโูุง ุงุฒ VG ฺฉู ุจุง `lvcreate` ุชุนุฑู ูโุดููุฏ ู ุฏุฑุณุช ูุซู ูพุงุฑุชุดู ุฏุฑ ุงุฎุชุงุฑ ุณุณุชู ูุงู ูุฑุงุฑ ูโฺฏุฑูุฏ.

```bash
# ูุซุงู ุณุงุฎุชู ฺฉ PV ุฑู /dev/sdb1
pvcreate /dev/sdb1

# ุณุงุฎุชู VG ุจู ูุงู vg_data ุจุง ฺฉ PV
vgcreate vg_data /dev/sdb1

# ุงุฌุงุฏ ฺฉ LV ุจู ูุงู lv_mysql ุจุง ุญุฌู 10G
lvcreate -n lv_mysql -L 10G vg_data

# ูุฑูุช ฺฉุฑุฏู LV ู ูุงูุช ฺฉุฑุฏู ุขู
mkfs.ext4 /dev/vg_data/lv_mysql
mount /dev/vg_data/lv_mysql /mnt/mysql
```

---

## ุงูุฒุงุด ุญุฌู Logical Volume

ุจุฑุง ุงูุฒุงุด ุญุฌูุ ุณู ูุฑุญูู ฺฉู ุฏุงุฑุฏ:

ฑ. **ุงูุฒูุฏู ูุถุง ูุฒฺฉ (ุฏุฑ ุตูุฑุช ูุงุฒ)**  
   - ุงฺฏุฑ ูุถุง ุฎุงู ุฏุฑ VG ูุฏุงุฑุฏุ ุงุจุชุฏุง ุฏุณฺฉ ุง ูพุงุฑุชุดู ุฌุฏุฏ ุฑุง ุจุง `pvcreate` ุงุถุงูู ู ุณูพุณ ุจุง `vgextend` ูุงุฑุฏ VG ฺฉูุฏ:
     ```bash
     pvcreate /dev/sdc1
     vgextend vg_data /dev/sdc1
     ```

ฒ. **ุงูุฒุงุด ุญุฌู LV**  
   - ุจุง `lvextend` ุญุฌู LV ุฑุง ุงูุฒุงุด ุฏูุฏ. ูโุชูุงูุฏ ุจุง `-L +5G` ุงุถุงูู ฺฉูุฏ ุง ุจุง `-l +100%FREE` ุชูุงู ูุถุง ุฎุงู ุฑุง ุงุฎุชุตุงุต ุฏูุฏ:
     ```bash
     lvextend -L +5G /dev/vg_data/lv_mysql
     # ุง
     lvextend -l +100%FREE /dev/vg_data/lv_mysql
     ```

ณ. **ฺฏุณุชุฑุด ุณุณุชู ูุงู**  
   - ุจุณุชู ุจู ููุน FSุ ุฏุณุชูุฑ ูุชูุงูุช ุงุณุช:
     - **ext4**:
       ```bash
       resize2fs /dev/vg_data/lv_mysql
       ```
     - **XFS** (ุจุงูุง ฺฉุฑูู ณูซฑธ):
       ```bash
       xfs_growfs /mnt/mysql
       ```

> โ๏ธ **ูฺฉุชู:** ุงฺฏุฑ ุญุฌู LV ุฑุง ุจูโุตูุฑุช ุขููุงู (ุฏุฑ ุญุงู ฺฉุงุฑ) ุงูุฒุงุด ูโุฏูุฏุ ุณุณุชู ูุงู ext4 ูุงุฒ ุจู unmount ูุฏุงุฑุฏุ XFS ูู ุชููุง ุจุง ุฏุณุชูุฑ `xfs_growfs` ุฑู mount-point ฺฉุงุฑ ูโฺฉูุฏ.

---

## ฺฉุงูุด ุญุฌู Logical Volume

ุจุฑุง ฺฉูฺฺฉ ฺฉุฑุฏู ุญุฌู LVุ ุฏูุช ฺฉูุฏ ฺฉู ุงุจุชุฏุง **ุญุฌู ุณุณุชู ูุงู** ุจุงุฏ ฺฉูุชุฑ ุงุฒ ุญุฌู ููุง LV ุจุงุดุฏ. ฺฉูุงุช ูุฑุงุญู:

ฑ. **ฺฺฉ ู ฺฉูฺฺฉ ฺฉุฑุฏู ุณุณุชู ูุงู**  
   - ุจุง unmount ุง ุฏุฑ ุญุงูุช ุชฺฉโฺฉุงุฑุจุฑู (single-user mode) ูพุฑุชุงุจ ฺฉูุฏ:
     ```bash
     umount /mnt/mysql
     e2fsck -f /dev/vg_data/lv_mysql     # ุจุฑุง ext4
     resize2fs /dev/vg_data/lv_mysql 8G  # ฺฉูฺฺฉ ฺฉุฑุฏู ุณุณุชู ูุงู ุจู 8G
     ```
   - ุจุฑุง XFS ุงูฺฉุงู shrink (ฺฉูฺฺฉ ฺฉุฑุฏู) ูุฌูุฏ ูุฏุงุฑุฏุ ุจุงุฏ LV ุฑุง ุจู ext4 ุชุจุฏู ฺฉูุฏ ุง ุงุทูุงุนุงุช ุฑุง ุฏุฑ ุฌุง ุฏฺฏุฑ ูููุชุงู ฺฉูพ ฺฉูุฏ.

2. **ฺฉุงูุด ุญุฌู LV**  
   - ุจุง `lvreduce` ุญุฌู LV ุฑุง ฺฉู ฺฉูุฏ:
     ```bash
     lvreduce -L 8G /dev/vg_data/lv_mysql
     ```

3. **ูุงูุช ูุฌุฏุฏ ู ฺฺฉ ููุง**  
   ```bash
   mount /dev/vg_data/lv_mysql /mnt/mysql
   df -h /mnt/mysql
   ```

> โ๏ธ **ูุดุฏุงุฑ ููู:** ููุดู ูุจู ุงุฒ ฺฉุงูุด ุญุฌูุ ุงุฒ ุฏุงุฏูโูุง **ูพุดุชุจุงู** (backup) ุจฺฏุฑุฏ. ฺฉูฺฺฉ ฺฉุฑุฏู LV ูโุชูุงูุฏ ุจุงุนุซ ุงุฒ ุฏุณุช ุฑูุชู ุฏุงุฏู ุดูุฏ.

---

## ูุฑูุงูโูุง ููุฏ ุจุฑุง ุจุฑุฑุณ ูุถุนุช

- ููุงุด ููู PVโูุง:
  ```bash
  pvs
  ```
- ููุงุด ููู VGโูุง (ู ูุถุงูุง ุงุณุชูุงุฏู/ุฎุงู):
  ```bash
  vgs
  ```
- ููุงุด ููู LVโูุง (ู ุญุฌูโุดุงู):
  ```bash
  lvs
  ```
- ุฌุฒุฆุงุช ุฏูู ฺฉ LV:
  ```bash
  lvdisplay /dev/vg_data/lv_mysql
  ```

---

### ๐ ุฌูุนโุจูุฏ ฺฏุงูโุจูโฺฏุงู

| ุนููุงุช                | ุฏุณุชูุฑุงุช ุงุตู                                                      |
|------------------------|--------------------------------------------------------------------|
| ุขูุงุฏูโุณุงุฒ ุฏุณฺฉ       | `pvcreate` โ `vgcreate`                                            |
| ุงุฌุงุฏ LV               | `lvcreate -n <name> -L <size> <VG>`                                |
| ุงูุฒุงุด ุญุฌู LV          | (1) `vgextend` [ุงุฎุชุงุฑ] <br> (2) `lvextend -L +<size>` <br> (3) `resize2fs`/`xfs_growfs` |
| ฺฉุงูุด ุญุฌู LV            | (1) `umount` + `e2fsck` + `resize2fs` <br> (2) `lvreduce -L <size>` <br> (3) `mount` |

ุจุง ุงู ุฑูุดโูุง ูโุชูุงูุฏ ุจูโุฑุงุญุช ู ุจุง ฺฉูุชุฑู ูุทุนุ ุญุฌู ูุถุง ููุทู ุฏุฑ ูููฺฉุณ ุฑุง ุงูุฒุงุด ุง ฺฉุงูุด ุฏูุฏ. ุงฺฏุฑ ุณุคุงู ุง ูุดฺฉู ุฏุฑ ูุฑ ูุฑุญูู ุฏุงุดุชุฏุ ุฎูุดุญุงู ูโุดูู ุจุดุชุฑ ุฑุงูููุง ฺฉูู!
