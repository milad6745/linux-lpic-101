**SUID (Set User ID)** و **SGID (Set Group ID)** دو نوع مجوز ویژه (Special Permissions) در لینوکس هستند که برای کنترل دسترسی به فایل‌ها و دایرکتوری‌ها استفاده می‌شوند. این مجوزها رفتار سیستم را در هنگام اجرای فایل‌ها یا دسترسی به دایرکتوری‌ها تغییر می‌دهند. در ادامه به شرح کامل این دو مفهوم می‌پردازیم:

---

### **1. SUID (Set User ID)**

#### **تعریف SUID:**
- وقتی مجوز SUID روی یک فایل اجرایی تنظیم شود، فایل با **مجوز مالک فایل** اجرا می‌شود، نه با مجوز کاربری که آن را اجرا کرده است.
- این ویژگی معمولاً برای دسترسی به منابع سیستمی که نیاز به مجوزهای بالاتری دارند، استفاده می‌شود.

#### **مثال کاربردی:**
- دستور `passwd` که برای تغییر رمز عبور استفاده می‌شود، معمولاً SUID دارد. این دستور باید بتواند فایل `/etc/shadow` را که فقط توسط روت قابل نوشتن است، تغییر دهد. با SUID، هر کاربری که این دستور را اجرا کند، به طور موقت مجوزهای روت را خواهد داشت.

#### **نمایش SUID:**
- SUID با حرف `s` در بخش مجوزهای مالک (Owner) نمایش داده می‌شود.
- مثال:
  ```bash
  -rwsr-xr-x 1 root root 12345 Jan 1 12:34 /usr/bin/passwd
  ```
  - `s` در `rws` نشان‌دهنده SUID است.

#### **تنظیم SUID:**
- برای تنظیم SUID از دستور `chmod` استفاده می‌شود:
  ```bash
  chmod u+s file
  ```
  یا به صورت عددی:
  ```bash
  chmod 4755 file
  ```
  - عدد `4` در `4755` نشان‌دهنده SUID است.

#### **نکات امنیتی SUID:**
- استفاده نادرست از SUID می‌تواند خطرات امنیتی ایجاد کند، زیرا کاربران عادی ممکن است بتوانند دسترسی‌های غیرمجاز به سیستم کسب کنند.
- فقط فایل‌های ضروری و مورد اعتماد باید SUID داشته باشند.

---

### **2. SGID (Set Group ID)**

#### **تعریف SGID:**
- وقتی مجوز SGID روی یک **فایل اجرایی** تنظیم شود، فایل با **مجوز گروه مالک فایل** اجرا می‌شود.
- وقتی SGID روی یک **دایرکتوری** تنظیم شود، فایل‌های ایجاد شده در آن دایرکتوری به طور خودکار به گروه مالک دایرکتوری تعلق می‌گیرند (نه گروه کاربری که فایل را ایجاد کرده است).

#### **مثال کاربردی:**
- در یک محیط اشتراکی، اگر چند کاربر در یک گروه باشند و بخواهند فایل‌های ایجاد شده در یک دایرکتوری به طور خودکار به آن گروه تعلق بگیرند، از SGID استفاده می‌شود.

#### **نمایش SGID:**
- SGID با حرف `s` در بخش مجوزهای گروه (Group) نمایش داده می‌شود.
- مثال:
  ```bash
  drwxr-sr-x 2 root developers 4096 Jan 1 12:34 /shared
  ```
  - `s` در `r-s` نشان‌دهنده SGID است.

#### **تنظیم SGID:**
- برای تنظیم SGID از دستور `chmod` استفاده می‌شود:
  ```bash
  chmod g+s file_or_directory
  ```
  یا به صورت عددی:
  ```bash
  chmod 2755 file_or_directory
  ```
  - عدد `2` در `2755` نشان‌دهنده SGID است.

#### **نکات امنیتی SGID:**
- SGID برای دایرکتوری‌ها می‌تواند مفید باشد، اما باید با دقت استفاده شود تا اطمینان حاصل شود که کاربران غیرمجاز به منابع دسترسی پیدا نکنند.

---

### **3. تفاوت SUID و SGID**

| ویژگی          | SUID                              | SGID                              |
|----------------|-----------------------------------|-----------------------------------|
| **هدف**        | اجرای فایل با مجوز مالک فایل.    | اجرای فایل با مجوز گروه فایل یا تعلق فایل‌های جدید به گروه دایرکتوری. |
| **نماد**       | `s` در بخش مالک (Owner).          | `s` در بخش گروه (Group).          |
| **عدد مجوز**   | `4` (مثال: `4755`).               | `2` (مثال: `2755`).               |
| **کاربرد**     | دسترسی موقت به منابع سیستمی.      | مدیریت گروه‌ها در محیط‌های اشتراکی. |

---

### **4. مثال‌های عملی**

#### **مثال SUID:**
1. تنظیم SUID روی یک فایل:
   ```bash
   chmod u+s /usr/bin/myprogram
   ```
2. بررسی مجوزها:
   ```bash
   ls -l /usr/bin/myprogram
   ```
   خروجی:
   ```bash
   -rwsr-xr-x 1 root root 12345 Jan 1 12:34 /usr/bin/myprogram
   ```

#### **مثال SGID:**
1. تنظیم SGID روی یک دایرکتوری:
   ```bash
   chmod g+s /shared
   ```
2. بررسی مجوزها:
   ```bash
   ls -ld /shared
   ```
   خروجی:
   ```bash
   drwxr-sr-x 2 root developers 4096 Jan 1 12:34 /shared
   ```

---

### **5. نکات پایانی**
- SUID و SGID ابزارهای قدرتمندی هستند، اما باید با دقت استفاده شوند تا از مشکلات امنیتی جلوگیری شود.
- همیشه قبل از تنظیم SUID یا SGID، اطمینان حاصل کنید که فایل یا دایرکتوری مورد نظر قابل اعتماد است.
- برای بررسی فایل‌های دارای SUID یا SGID در سیستم، می‌توانید از دستورات زیر استفاده کنید:
  ```bash
  find / -perm -4000  # فایل‌های دارای SUID
  find / -perm -2000  # فایل‌های دارای SGID
  ```
