فصل پنجم LPIC-101 (موضوع 105) به **مدیریت کاربران و گروه‌ها** در لینوکس می‌پردازد. این فصل شامل مباحث مهمی است که برای ایجاد، مدیریت و حذف کاربران و گروه‌ها، تنظیم مجوزها و کنترل دسترسی‌ها در سیستم‌های لینوکس ضروری هستند. در ادامه به شرح کامل این فصل می‌پردازیم:

---

### **1. مدیریت کاربران (User Management)**
- **فایل‌های مرتبط با کاربران:**
  - `/etc/passwd`: شامل اطلاعات اصلی کاربران (نام کاربری، UID، GID، پوسته و ...).
  - `/etc/shadow`: شامل اطلاعات رمز عبور کاربران (رمز عبور رمزنگاری شده، تاریخ انقضا و ...).
  - `/etc/login.defs`: تنظیمات پیش‌فرض برای ایجاد کاربران جدید.

- **دستورات مدیریت کاربران:**
  - **ایجاد کاربر جدید:**
    ```bash
    useradd username
    ```
    - گزینه‌های رایج:
      - `-m`: ایجاد دایرکتوری خانگی کاربر.
      - `-s /bin/bash`: تنظیم پوسته پیش‌فرض.
      - `-u UID`: تعیین UID خاص برای کاربر.
      - `-g GID`: تعیین گروه اصلی کاربر.

  - **تغییر رمز عبور کاربر:**
    ```bash
    passwd username
    ```

  - **تغییر اطلاعات کاربر:**
    ```bash
    usermod [options] username
    ```
    - گزینه‌های رایج:
      - `-l new_username`: تغییر نام کاربری.
      - `-d /new/home/dir`: تغییر دایرکتوری خانگی.
      - `-s /new/shell`: تغییر پوسته پیش‌فرض.

  - **حذف کاربر:**
    ```bash
    userdel username
    ```
    - گزینه `-r`: حذف دایرکتوری خانگی کاربر.

---

### **2. مدیریت گروه‌ها (Group Management)**
- **فایل‌های مرتبط با گروه‌ها:**
  - `/etc/group`: شامل اطلاعات گروه‌ها (نام گروه، GID و اعضا).
  - `/etc/gshadow`: شامل اطلاعات رمز عبور گروه‌ها.

- **دستورات مدیریت گروه‌ها:**
  - **ایجاد گروه جدید:**
    ```bash
    groupadd groupname
    ```
    - گزینه `-g GID`: تعیین GID خاص برای گروه.

  - **تغییر نام گروه:**
    ```bash
    groupmod -n new_groupname old_groupname
    ```

  - **حذف گروه:**
    ```bash
    groupdel groupname
    ```

  - **افزودن کاربر به گروه:**
    ```bash
    usermod -aG groupname username
    ```
    - گزینه `-aG`: افزودن کاربر به گروه‌های ثانویه بدون حذف گروه‌های قبلی.

  - **حذف کاربر از گروه:**
    ```bash
    gpasswd -d username groupname
    ```

---

### **3. مدیریت مجوزها و دسترسی‌ها (Permissions and Access Control)**
- **مجوزهای فایل و دایرکتوری:**
  - مجوزها شامل سه سطح دسترسی هستند:
    - **مالک (Owner):** کاربری که فایل یا دایرکتوری را ایجاد کرده است.
    - **گروه (Group):** گروهی که فایل یا دایرکتوری به آن تعلق دارد.
    - **سایر کاربران (Others):** سایر کاربران سیستم.

  - هر سطح دسترسی شامل سه نوع مجوز است:
    - **خواندن (r):** اجازه مشاهده محتوا.
    - **نوشتن (w):** اجازه تغییر محتوا.
    - **اجرا (x):** اجازه اجرای فایل یا ورود به دایرکتوری.

  - نمایش مجوزها با دستور `ls -l`:
    ```bash
    -rwxr-xr-- 1 user group 4096 Jan 1 12:34 file.txt
    ```
    - `-rwxr-xr--`: مجوزها (مالک: rwx، گروه: r-x، سایرین: r--).
    - `user`: مالک فایل.
    - `group`: گروه فایل.

- **تغییر مجوزها:**
  - دستور `chmod` برای تغییر مجوزها:
    ```bash
    chmod [options] permissions file
    ```
    - روش عددی:
      ```bash
      chmod 755 file.txt
      ```
      - `7`: مالک (rwx).
      - `5`: گروه (r-x).
      - `5`: سایرین (r-x).

    - روش نمادین:
      ```bash
      chmod u+x file.txt  # افزودن مجوز اجرا برای مالک
      chmod o-w file.txt  # حذف مجوز نوشتن برای سایرین
      ```

- **تغییر مالک و گروه فایل:**
  - دستور `chown` برای تغییر مالک و گروه:
    ```bash
    chown user:group file
    ```
    - مثال:
      ```bash
      chown user1:admins file.txt
      ```

  - دستور `chgrp` برای تغییر گروه:
    ```bash
    chgrp groupname file
    ```

---

### **4. مدیریت رمز عبور و امنیت کاربران**
- **تنظیمات رمز عبور:**
  - دستور `passwd` برای تغییر رمز عبور کاربر.
  - فایل `/etc/shadow` شامل اطلاعات رمز عبور کاربران است.

- **انقضای رمز عبور:**
  - دستور `chage` برای مدیریت انقضای رمز عبور:
    ```bash
    chage [options] username
    ```
    - گزینه‌های رایج:
      - `-M days`: حداکثر مدت اعتبار رمز عبور.
      - `-E YYYY-MM-DD`: تاریخ انقضای حساب کاربری.
      - `-W days`: هشدار قبل از انقضا.

---

### **5. مدیریت دسترسی‌های پیشرفته (Advanced Access Control)**
- **مجوزهای ویژه (Special Permissions):**
  - **SUID (Set User ID):** اجرای فایل با مجوز مالک.
    ```bash
    chmod u+s file
    ```
  - **SGID (Set Group ID):** اجرای فایل با مجوز گروه.
    ```bash
    chmod g+s file
    ```
  - **Sticky Bit:** محدود کردن حذف فایل‌ها در دایرکتوری به مالک فایل.
    ```bash
    chmod +t directory
    ```

- **لیست کنترل دسترسی (ACL - Access Control List):**
  - ACL برای تعیین مجوزهای دقیق‌تر برای کاربران و گروه‌ها استفاده می‌شود.
  - دستورات مدیریت ACL:
    - `setfacl`: تنظیم ACL.
      ```bash
      setfacl -m u:username:rwx file
      ```
    - `getfacl`: نمایش ACL.
      ```bash
      getfacl file
      ```

---

این فصل از LPIC-101 به شما کمک می‌کند تا مهارت‌های لازم برای مدیریت کاربران، گروه‌ها و مجوزها در لینوکس را به دست آورید. این مباحث برای هر مدیر سیستم لینوکس ضروری هستند.
